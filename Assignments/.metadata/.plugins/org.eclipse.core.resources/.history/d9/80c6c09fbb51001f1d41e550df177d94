package com.aurionpro.model;

import java.util.Scanner;

public class TicTacToeFacade {
    private TicTacToeGame game;
    private Scanner scanner;

    public TicTacToeFacade() {
        game = new TicTacToeGame();
        scanner = new Scanner(System.in);
    }

    public void startGame() {
        System.out.println("TIC TAC TOE Game");
        System.out.println("Enter the name, player 1");
        String p1 = scanner.next();
        System.out.println("Enter the name, player 2");
        String p2 = scanner.next();

        boolean hasEnded = false;

        while (!hasEnded) {
            printBoard();
            System.out.println(game.isPlayer1Turn() ? "Player 1 turn (x)" : "Player 2 turn (o)");
            
            int row = -1, col = -1;
            while (true) {
                System.out.println("Enter the row number");
                row = scanner.nextInt();
                System.out.println("Enter the column number");
                col = scanner.nextInt();
                if (game.makeMove(row, col)) {
                    break;
                } 
                System.out.println("Invalid move. Try again.");
            }

            char result = game.checkWinner();
            if (result == 'x') {
                System.out.println("Player 1 has won!");
                hasEnded = true;
            }
            if (result == 'o') {
                System.out.println("Player 2 has won!");
                hasEnded = true;
            }
            if (result == 'T') {
                System.out.println("It's a tie!");
                hasEnded = true;
            }
        }
        printBoard();
    }

    private void printBoard() {
        char[][] board = game.getBoard();
        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 3; j++) {
                System.out.print(board[i][j] + " ");
            }
            
            System.out.println();
            System.out.println("----------");
        }
    }
}
